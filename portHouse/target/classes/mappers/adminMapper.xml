<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.port.mappers.adminMapper">
	<!-- 카테고리 호출 -->
	<select id="category" resultType="com.port.vo.CategoryVO">
		SELECT 1 AS LEVEL, cateName, cateCode, cateCodeRef FROM board_category WHERE cateCodeRef IS NULL
		UNION ALL
		SELECT 2 AS LEVEL, cateName, cateCode, cateCodeRef FROM board_category WHERE cateCodeRef IS NOT NULL
		ORDER BY cateCode
	</select>
	
	<!-- 게시물 등록 -->
	<insert id="register" parameterType="com.port.vo.BoardVO">
		INSERT INTO board (brdNum, brdName, cateCode, brdLink, brdDes1, brdDes2)
		VALUES ((select max(brdNum)+1 from board ALIAS_FOR_SUBQUERY), #{brdName}, #{cateCode}, #{brdLink}, #{brdDes1}, #{brdDes2})
	</insert>
	
	<!-- 게시물 목록 / index -->
	<select id="boardList" resultType="com.port.vo.BoardVO">
		SELECT brdNum, brdName, cateCode, brdLink, brdDes1, brdDes2, brdImg, brdDate
		FROM board
		ORDER BY brdNum desc
	</select>
	
	<!-- 게시물 상세 -->
	<select id="boardView" parameterType="int" resultType="com.port.vo.BoardVO">
		SELECT brdNum, brdName, cateCode, brdLink, brdDes1, brdDes2, brdImg, brdDate
		FROM board
		WHERE brdNum = #{brdNum}
	</select>
</mapper>